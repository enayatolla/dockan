{% load static %}

<nav
   dir="rtl"
   class="navbar navbar-expand-lg navbar-light bg-dark w-100 d-flex"
>
   <!-- offCanvas -->
   <div
      class="d-flex justify-content-between align-items-center pe-2 h-100"
      style="
         display: flex;
         align-items: center;
         justify-content: space-between;
         height: 100%;
      "
   >
      <!-- offCanvas -->
      <div class="col-lg-4 col-md-4 d-lg-none">
         <div class="mt-0">
            <button
               class="navbar-toggler"
               type="button"
               data-bs-toggle="offcanvas"
               data-bs-target="#offcanvasBackdrop"
               aria-controls="offcanvasBackdrop"
            >
               <span class="navbar-toggler-icon p-3"></span>
            </button>

            <div
               class="offcanvas offcanvas-end"
               tabindex="-1"
               id="offcanvasBackdrop"
               aria-labelledby="offcanvasBackdropLabel"
               style="max-width: 75vw"
            >
               <div
                  class="offcanvas-header d-flex align-items-center border-bottom p-3"
                  style="z-index: 10"
               >
                  <h5 id="offcanvasBackdropLabel" class="offcanvas-title">
                     <a class="navbar-brand text-success logo mx-5" href="/">
                        جورگر
                     </a>
                  </h5>
                  <!--  -->
                  <button
                     type="button"
                     class="btn-close text-reset"
                     data-bs-dismiss="offcanvas"
                     aria-label="Close"
                  ></button>
               </div>

               <div class="offcanvas-body my-1 mx-0 flex-grow-0">
                  <div class="flex-fill">
                     <ul
                        class="nav navbar-nav d-flex justify-content-between mx-xl-auto"
                     >
                        <li class="nav-item">
                           <a class="nav-link" href="/"> حراج شده </a>
                        </li>
                        <li class="nav-item">
                           <a class="nav-link" href="/"> پرفروش ترین </a>
                        </li>
                        <li class="nav-item">
                           <a class="nav-link" href="/"> صفحه محصولات </a>
                        </li>
                        <li class="nav-item">
                           <a class="nav-link" href="/"> دسته بندی </a>
                        </li>
                     </ul>
                  </div>
               </div>
            </div>
         </div>
      </div>

      <!-- brand -->
      <a
         class="navbar-brand text-success logo mx-3 mb-2"
         href="{% url 'shop:home_page' %}"
      >
         جورگر
      </a>
   </div>

   <div
      class="align-self-center collapse navbar-collapse flex-fill d-lg-flex justify-content-lg-between"
      id=""
   >
      <div class="flex-fill">
         <ul class="nav navbar-nav d-flex justify-content-center mx-xl-auto">
            <li class="nav-item">
               <a class="nav-link" href="/"> حراج شده </a>
            </li>
            <li class="nav-item">
               <a class="nav-link" href="/"> پرفروش ترین </a>
            </li>
            <li class="nav-item">
               <a class="nav-link" href="/"> صفحه محصولات </a>
            </li>
            <li class="nav-item">
               <a class="nav-link" href="/"> دسته بندی </a>
            </li>
         </ul>
      </div>
   </div>

   <div
      class="navbar align-items-stretch d-flex flex-column-reverse flex-sm-row flex-grow-1 p-2"
   >
      <!-- search -->
      <form
         class=""
         dir="rtl"
         method="get"
         action="/"
         style="
            border: 1.5px solid grey;
            border-radius: 3px;
            overflow: hidden;
            height: 45px;
            margin: 0;
            flex-grow: 1;
            display: flex;
         "
      >
         <input
            type="text"
            name="query"
            class="border-0"
            style="
               outline: none;
               padding: 0px 10px 0 0;
               height: 100%;
               width: max-content;
               flex-grow: 1;
            "
         />
         <button
            type="submit"
            name="search"
            class="border-0"
            style="height: 100%; padding: 0 15px; margin: 0"
         >
            <svg
               xmlns="http://www.w3.org/2000/svg"
               width="16"
               height="16"
               fill="currentColor"
               class="bi bi-search"
               viewBox="0 0 16 16"
            >
               <path
                  d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001q.044.06.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1 1 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0"
               />
            </svg>
         </button>
      </form>

      <!-- cart user -->
      <div
         class="d-flex align-items-center justify-content-between mb-3 mb-md-0"
      >
         <!-- cart -->
         <a
            class="nav-icon position-relative text-decoration-none mx-4"
            href="{% url 'cart:cart' %}"
         >
            <svg
               xmlns="http://www.w3.org/2000/svg"
               width="24"
               height="24"
               fill="currentColor"
               class="bi bi-cart"
               viewBox="0 0 16 16"
            >
               <path
                  d="M0 1.5A.5.5 0 0 1 .5 1H2a.5.5 0 0 1 .485.379L2.89 3H14.5a.5.5 0 0 1 .491.592l-1.5 8A.5.5 0 0 1 13 12H4a.5.5 0 0 1-.491-.408L2.01 3.607 1.61 2H.5a.5.5 0 0 1-.5-.5M3.102 4l1.313 7h8.17l1.313-7zM5 12a2 2 0 1 0 0 4 2 2 0 0 0 0-4m7 0a2 2 0 1 0 0 4 2 2 0 0 0 0-4m-7 1a1 1 0 1 1 0 2 1 1 0 0 1 0-2m7 0a1 1 0 1 1 0 2 1 1 0 0 1 0-2"
               />
            </svg>

            {% if request.user.cart.total_cart_items > 0 %}
            <span
               class="badge rounded-pill bg-dark text-light en_to_fa_number"
               style="position: absolute; top: -12px; left: 5px"
            >
               {{ request.user.cart.total_cart_items }}
            </span>
            {% endif %}
         </a>

         <!-- user dashboard offset -->
         <div dir="rtl" class="btn-group">
            <button
               dir="rtl"
               type="button"
               class="btn dropdown-toggle p-0 mx-2"
               id="dropdownMenuOffset"
               data-bs-toggle="dropdown"
               aria-expanded="false"
               data-bs-offset="10,20"
            >
               {% if request.user.is_authenticated %}
               <span>{{ request.user.username }}</span>
               {% else %}
               <span>ورود</span>
               {% endif %}
            </button>

            <ul
               dir="rtl"
               style="left: 10px; text-align-last: right"
               class="dropdown-menu"
               aria-labelledby="dropdownMenuOffset"
            >
               {% if request.user.is_authenticated %}
               <!--  -->
               {% if request.user.is_staff %}
               <li>
                  <a class="dropdown-item" href="/admin/">پنل ادمین</a>
               </li>
               {% endif %}

               <li>
                  <a class="dropdown-item" href="{% url 'users:dashboard' %}">
                     داشبورد
                  </a>
               </li>

               <li>
                  <a class="dropdown-item" href="{% url 'users:user_logout' %}">
                     خروج از حساب کاربری
                  </a>
               </li>
               {% else %}
               <li>
                  <a class="dropdown-item" href="{% url 'users:user_login' %}">
                     ورود
                  </a>
               </li>
               <li>
                  <a
                     class="dropdown-item"
                     href="{% url 'users:user_register' %}"
                  >
                     ایجاد حساب کاربری
                  </a>
               </li>
               {% endif %}
            </ul>
         </div>
      </div>
   </div>
</nav>
